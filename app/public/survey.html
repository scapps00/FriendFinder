<!DOCTYPE html>
<html>
	<head lang="en-us">
		<meta charset="UTF-8">
		<title>FriendFinder</title>
		<link href="https://fonts.googleapis.com/css?family=BioRhyme" rel="stylesheet">
	</head>
	<body>
		<h1><a href="/">FriendFinder</a></h1>
		<h2>Please answer the questions to be matched with someone!</h2>
		<h3>Rate each statement from 1 to 5 depending on how true it is for you</h3>
		<form>
				1. Dogs are better than cats.<br>
				<input type="radio" name="1" value="1">1 (Not true at all)<br>
				<input type="radio" name="1" value="2">2<br>
				<input type="radio" name="1" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="1" value="4">4<br>
				<input type="radio" name="1" value="5">5 (Absolutely true)<br><br>

				2. I love to travel and experience new things.<br>
				<input type="radio" name="2" value="1">1 (Not true at all)<br>
				<input type="radio" name="2" value="2">2<br>
				<input type="radio" name="2" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="2" value="4">4<br>
				<input type="radio" name="2" value="5">5 (Absolutely true)<br><br>

				3. I love learning.<br>
				<input type="radio" name="3" value="1">1 (Not true at all)<br>
				<input type="radio" name="3" value="2">2<br>
				<input type="radio" name="3" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="3" value="4">4<br>
				<input type="radio" name="3" value="5">5 (Absolutely true)<br><br>

				4. I am a religious person.<br>
				<input type="radio" name="4" value="1">1 (Not true at all)<br>
				<input type="radio" name="4" value="2">2<br>
				<input type="radio" name="4" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="4" value="4">4<br>
				<input type="radio" name="4" value="5">5 (Absolutely true)<br><br>

				5. I like myself.<br>
				<input type="radio" name="5" value="1">1 (Not true at all)<br>
				<input type="radio" name="5" value="2">2<br>
				<input type="radio" name="5" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="5" value="4">4<br>
				<input type="radio" name="5" value="5">5 (Absolutely true)<br><br>

				6. I love making art.<br>
				<input type="radio" name="6" value="1">1 (Not true at all)<br>
				<input type="radio" name="6" value="2">2<br>
				<input type="radio" name="6" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="6" value="4">4<br>
				<input type="radio" name="6" value="5">5 (Absolutely true)<br><br>

				7. I love lazy days where I relax and don't get much done.<br>
				<input type="radio" name="7" value="1">1 (Not true at all)<br>
				<input type="radio" name="7" value="2">2<br>
				<input type="radio" name="7" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="7" value="4">4<br>
				<input type="radio" name="7" value="5">5 (Absolutely true)<br><br>

				8. I would have voted for Bernie Sanders for president.<br>
				<input type="radio" name="8" value="1">1 (Not true at all)<br>
				<input type="radio" name="8" value="2">2<br>
				<input type="radio" name="8" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="8" value="4">4<br>
				<input type="radio" name="8" value="5">5 (Absolutely true)<br><br>

				9. I recycle.<br>
				<input type="radio" name="9" value="1">1 (Not true at all)<br>
				<input type="radio" name="9" value="2">2<br>
				<input type="radio" name="9" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="9" value="4">4<br>
				<input type="radio" name="9" value="5">5 (Absolutely true)<br><br>

				10. I buy a lot of used items.<br>
				<input type="radio" name="10" value="1">1 (Not true at all)<br>
				<input type="radio" name="10" value="2">2<br>
				<input type="radio" name="10" value="3">3 (Neither true nor untrue)<br>
				<input type="radio" name="10" value="4">4<br>
				<input type="radio" name="10" value="5">5 (Absolutely true)<br><br>

				Your name?<br>
				<input type="text" name="name"><br><br>

				Last but not least, a photo of you!<br>
				<input name="photo" type="text">
		</form>
		<br>
		<div id="error"></div>
		<br>
		<button id="submit">Submit</button>
		<!-- The Modal -->
		<div id="myModal" class="modal">

  		<!-- Modal content -->
  		<div class="modal-content">
    		<span class="close">&times;</span>
    		<p id="matchName"></p>
    		<p><img src="" id="matchImage" alt="your match!">
  		</div>

</div>
	</body>
</html>
<style>
	body {
		background-color: #2FA5E4;
	}

	h1 {
		color: white;
		font-family: 'BioRhyme', serif;
		text-align: center;
		font-size: 75px;
	}

	h2 {
		color: white;
		font-family: 'BioRhyme', serif;
		text-align: center;
		font-size: 50px;
	}

	h3 {
		color: white;
		font-family: 'BioRhyme', serif;
		text-align: center;
		font-size: 30px;
	}

	form {
		color: white;
		font-family: 'BioRhyme', serif;
		text-align: center;
		font-size: 20px;
	}

	#submit {
		height: 50px;
		font-family: 'BioRhyme', serif;
		font-size: 35px;
		margin: auto;
		display: block;
	}

	form {
		text-align: left;
		margin-left: 550px;
	}

	[name=photo], [name=name] {
		width: 400px;
		font-family: 'BioRhyme', serif;
		font-size: 35px;
	}

	/* The Modal (background) */
	.modal {
	    display: none; /* Hidden by default */
	    position: fixed; /* Stay in place */
	    z-index: 1; /* Sit on top */
	    left: 0;
	    top: 0;
	    width: 100%; /* Full width */
	    height: 100%; /* Full height */
	    overflow: auto; /* Enable scroll if needed */
	    background-color: rgb(0,0,0); /* Fallback color */
	    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
	}

	/* Modal Content/Box */
	.modal-content {
	    background-color: white;
	    margin: 15% auto; /* 15% from the top and centered */
	    padding: 20px;
	    width: 50%;
	}

	/* The Close Button */
	.close {
	    color: #aaa;
	    float: right;
	    font-size: 28px;
	    font-weight: bold;
	}

	.close:hover,
	.close:focus {
	    color: black;
	    text-decoration: none;
	    cursor: pointer;
	}

	#matchName {
		text-align: center;
		font-family: 'BioRhyme', serif;
		font-size: 30px;
	}

	#matchImage {
		margin: auto;
		display: block;
	}

	#error {
		color: red;
		font-family: 'BioRhyme', serif;
		text-align: center;
		font-size: 30px;
	}

	a:link, a:visited, a:hover, a:active {
		color: white;
		text-decoration: none;
	}
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>

	// Get the modal
	var modal = document.getElementById('myModal');

	// Get the button that opens the modal
	var btn = document.getElementById("myBtn");

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
	    modal.style.display = "none";
	    $("[name=name]").val("");
	    $("[name=photo]").val("");
	    $("[type=radio]").prop("checked", false);
	}

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
	    if (event.target == modal) {
	        modal.style.display = "none";
	        $("[name=name]").val("");
	        $("[name=photo]").val("");
	        $("[type=radio]").prop("checked", false);
	    }
	}

	$("#submit").click(function() {
		if (check()) return;
		$("#error").text("");
		var newPerson = {
			name: $("[name=name]").val()
		};
		var answers = [];
		for (var i = 1; i<11; i++) {
			answers.push($("[name = " + i +"]:checked").val());
		};
		newPerson.answers = answers;
		newPerson.imageURL = $("[name = photo]").val();
		$.post("/api/add", newPerson).done(function(data) {
			modal.style.display = "block";
			$("#matchName").text(data.name + " is your best match!");
			$("#matchImage").attr("src", data.imageURL);
		});
	});

	function check() {
		if ($("[name=name]").val() == "") {
			$("#error").text("Please enter a name!");
			return true;
		}
		for (var i = 0; i < 10; i++) {
			if ($("[name = " + (i + 1) +"]:checked").val() == undefined) {
				$("#error").text("Please answer question " + (i + 1) +"!");
				return true;
			}
		}
		if ($("[name=photo]").val() == "") {
			$("#error").text("Please enter an image URL!");
			return true;
		}
	}
</script>